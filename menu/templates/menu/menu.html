{% extends 'menu/base.html' %}
{% load tz %}
{% block title %}Menu - Restaurant{% endblock %}
{% block extra_head %}
    <style>
        .card-img-top {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 1rem 1rem 0 0;
        }
    </style>
    <script>
        function filterMenu() {
            var input = document.getElementById('searchInput').value.toLowerCase();
            var items = document.getElementsByClassName('menu-item');
            for (var i = 0; i < items.length; i++) {
                var name = items[i].getAttribute('data-name').toLowerCase();
                if (name.includes(input)) {
                    items[i].style.display = '';
                } else {
                    items[i].style.display = 'none';
                }
            }
        }
    </script>
{% endblock %}
{% block content %}
    <div class="container mt-4">
        <h1>Menu</h1>
        <div class="mb-3">
            <input type="text" id="searchInput" class="form-control" placeholder="Search menu..." onkeyup="filterMenu()">
        </div>
        <div class="mb-4">
            <button class="btn btn-outline-primary me-2" onclick="filterCategory('All')">All</button>
            <button class="btn btn-outline-primary me-2" onclick="filterCategory('Starters')">Starters</button>
            <button class="btn btn-outline-primary me-2" onclick="filterCategory('Mains')">Mains</button>
            <button class="btn btn-outline-primary me-2" onclick="filterCategory('Desserts')">Desserts</button>
            <button class="btn btn-outline-primary" onclick="filterCategory('Drinks')">Drinks</button>
        </div>
        <script>
            function filterCategory(category) {
                var items = document.getElementsByClassName('menu-item');
                for (var i = 0; i < items.length; i++) {
                    var cat = items[i].getAttribute('data-category');
                    if (category === 'All' || cat === category) {
                        items[i].style.display = '';
                    } else {
                        items[i].style.display = 'none';
                    }
                }
            }
        </script>
        {% regroup menu_items by category.name as category_list %}
        {% for cat in category_list %}
        <h3 class="mt-4">{{ cat.grouper }}</h3>
        <div class="row">
            {% for item in cat.list %}
            <div class="col-md-4 mb-4 menu-item" data-category="{{ item.category.name }}" data-name="{{ item.name }}">
                <div class="card h-100">
                    {% if item.image %}
                        <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}">
                    {% else %}
                        <img src="/static/menu/images/placeholder.jpg" class="card-img-top" alt="{{ item.name }}">
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.name }}</h5>
                        <p class="card-text">{{ item.description }}</p>
                        <p class="card-text fw-bold">â‚¹{{ item.price }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
{% endblock %} 